<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <a href="#">
            <img src="images/logo/cupLight.png" alt="cupLight-Logo">
        </a>
        <nav>
            <a href="#hero">Home</a>
            <a href="#projects">Projects</a>
            <a href="productsPage.html">Products</a>
            <a href="contactUs.html">Contact</a>
        </nav>
    </header>
    <section class="hero" id="hero">
        <div class="hero-content">
            <h2>The Light Leads Your Life</h2>
            <p>Explore your style</p>
        </div>
    </section>
    <div class="floating-box">
        <div class="category-box">

            <div class="category-section">
                <img src="https://img.icons8.com/ios-filled/50/000000/lamp.png" alt="Indoor" class="cat-icon">
                <h3>Indoor</h3>
            </div>

            <div class="divider"></div>

            <div class="category-section">
                <img src="https://img.icons8.com/ios-filled/50/000000/garden.png" alt="Outdoor" class="cat-icon">
                <h3>Outdoor</h3>
            </div>

            <div class="divider"></div>

            <div class="category-section">
                <img src="https://img.icons8.com/ios-filled/50/000000/chandelier.png" alt="Decorative" class="cat-icon">
                <h3>Decorative</h3>
            </div>

            <div class="divider"></div>

            <div class="category-section">
                <img src="https://img.icons8.com/ios-filled/50/000000/solar-panel.png" alt="Solar" class="cat-icon">
                <h3>Solar</h3>
            </div>

        </div>
    </div>

    <!-- Featured Products Section -->
    <section class="home-products-section">
        <div class="home-section-header">
            <div>
                <h2>Featured Products</h2>
                <p>Discover our top lighting solutions</p>
            </div>
            <a href="productsPage.html" class="home-see-all">See all →</a>
        </div>

        <div class="product-grid" id="home-featured-products">
            <div class="loading">Loading products...</div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        © 2025 Cup Lighton — All Rights Reserved
    </footer>

    <script>
        // Load featured products from data.json
        async function loadFeaturedProducts() {
            const productGrid = document.getElementById('home-featured-products');

            try {
                const response = await fetch('data.json');
                const products = await response.json();

                // Get first 4 products
                const featuredProducts = products.slice(0, 4);

                // Clear loading message
                productGrid.innerHTML = '';

                // Create product cards
                featuredProducts.forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'product-card';

                    // Get the first image if images array exists, otherwise use image field
                    const imageUrl = product.images ? product.images[0] : product.image;

                    // Display categories (show all if multiple)
                    let categoryDisplay;
                    if (Array.isArray(product.categories)) {
                        categoryDisplay = product.categories.map(cat => capitalize(cat)).join(', ');
                    } else {
                        categoryDisplay = capitalize(product.category);
                    }

                    card.innerHTML = `
                        <img src="${imageUrl}" alt="${product.name}" style="cursor: pointer;">
                        <h3 style="cursor: pointer;">${product.name}</h3>
                        <p class="home-product-category" style="cursor: pointer;">${categoryDisplay}</p>
                        <div class="home-product-bottom">
                            <p class="home-product-price">฿${product.price.toLocaleString()}</p>
                            <button class="home-product-btn" onclick="event.stopPropagation(); window.open('${product.pdf}', '_blank')">Datasheet</button>
                        </div>
                    `;

                    // Add click event to card elements (not button)
                    card.querySelector('img').addEventListener('click', () => {
                        window.location.href = `productDetail.html?id=${product.id}`;
                    });
                    card.querySelector('h3').addEventListener('click', () => {
                        window.location.href = `productDetail.html?id=${product.id}`;
                    });
                    card.querySelector('.home-product-category').addEventListener('click', () => {
                        window.location.href = `productDetail.html?id=${product.id}`;
                    });

                    productGrid.appendChild(card);
                });
            } catch (error) {
                console.error('Error loading products:', error);
                productGrid.innerHTML = '<p style="text-align: center; color: #666;">Failed to load products.</p>';
            }
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        // Load products when page loads
        document.addEventListener('DOMContentLoaded', loadFeaturedProducts);
    </script>

</body>

</html>